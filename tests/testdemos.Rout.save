
R version 2.11.1 (2010-05-31)
Copyright (C) 2010 The R Foundation for Statistical Computing
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> ## This is a script to test all the demos in the zelig's demo directory.
> ## It opens a connection to each demo file,manipulate the script (i.e.
> ## commenting 'user.prompt()' etc. and then run it
> ##
> ## NOTE: The idea is to make this process as silent as possible.
> ## invisible() will work for model's output but not for some R messages
> ## (i.e. require(VGAM) or library(VGAM) will still give some warnnings)
> ## To avoid those warnings one can use library(VGAM,warn.conflicts=FALSE)
> ## or require(VGAM, warn.conflicts=FALSE) This could be fixed when we
> ## change zelig2* functions. Which means that we are not going to use
> ## require(...) in each zelig2* but in one central function which gets
> ## the info. on which packages to load by looking at describe.mymodel
> ## function.
> ## 03/23/2007 - look at the package "seesion"; maybe smth interesting..?
> ##
> ## some helping functions
> 
> "%w/o%" <- function(x,y) x[!x %in% y]
> 
> ## get the path of zelig's demo directory
> zpath<- system.file(package="Zelig")
> zpath<-paste(zpath,"/demo/",sep="")
> 
> ## get the file list of all demos
> demoFiles<- list.files(zpath,pattern="\\.[RrSsQq]$")
> 
> ## Keep a list of demos which failed
> demoFail <- c()
> 
> require(Zelig)
Loading required package: Zelig
Loading required package: MASS
Loading required package: iterators
Loading required package: survival
Loading required package: splines

   ZELIG (Versions 4.0-0, built: 2010-09-28)
+----------------------------------------------------------------+
+  Please refer to http://gking.harvard.edu/zelig for full       +
+  documentation or help.zelig() for help with commands and      +
+  models support by Zelig.                                      +
+                                                                +
+  Zelig project citations:                                      +
+    Kosuke Imai, Gary King, and Olivia Lau.  (2009).            +
+    ``Zelig: Everyone's Statistical Software,''                 +
+    http://gking.harvard.edu/zelig                              +
+   and                                                          +
+    Kosuke Imai, Gary King, and Olivia Lau. (2008).             +
+    ``Toward A Common Framework for Statistical Analysis        +
+    and Development,'' Journal of Computational and             +
+    Graphical Statistics, Vol. 17, No. 4 (December)             +
+    pp. 892-913.                                                +
+                                                                +
+   To cite individual Zelig models, please use the citation     +
+   format printed with each model run and in the documentation. +
+----------------------------------------------------------------+

> 
> ## process each demo
> ##for(demo in c("ls.R","blogit.R","ei.dynamic.R")){
> for(demo in demoFiles){
+         ## list of attached packages before this demo is run
+         beforePkgs <- search()
+         beforeLs <- ls()
+         print(demo)
+ 
+         ## if file does not exists, we dont have demo for this file
+         ## so add it to the list of non-working demos and go to the
+         ## next demo
+         if (!file.exists(paste(zpath,demo,sep=""))){
+                 demoFail <- c(demoFail, demo)
+                 next
+         }
+         
+         ## open a connection to the file and read all the lines
+         con <- file(paste(zpath,demo,sep=""),"r")
+         lines<- readLines(con)
+ 
+         ## find all the lines starting with zero or more spaces
+         ## then 'user.prompt()' and comment them out
+         newlines<-gsub('^ *user',"##user",lines)
+ 
+         ## try to run the edited demo. "invisible" is uded to make it quiet
+         res=try(invisible(capture.output(eval(parse(text=newlines)))))
+         if (inherits(res,"try-error")) {
+                 demoFail <- c(demoFail,demo)
+         }
+         
+         ## close the connection
+         close(con)
+ 
+         ## running this demo may have attached some
+         ## packages. Let's detach them
+         afterPkgs <- search()
+         pkgToDetach <- afterPkgs %w/o% beforePkgs
+         for ( pkg in pkgToDetach){
+                 ## you cant use simple detach(pkg) here
+                 ## see examples on ?detach 
+                 detach(pos=match(pkg,search()))
+         }
+         afterLs <-ls()
+ 
+         ## Clean up all the objects
+         rm(list = (afterLs %w/o% beforeLs))
+         
+ }
[1] "gamma.R"
How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2007. "gamma: Gamma Regression for Continuous, Positive Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

[1] "logit.R"
How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2008. "logit: Logistic Regression for Dichotomous Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2008. "logit: Logistic Regression for Dichotomous Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

[1] "ls.R"
How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2007. "ls: Least Squares Regression for Continuous Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2007. "ls: Least Squares Regression for Continuous Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

[1] "negbinom.R"
How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2010. "negbinom" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

[1] "normal.R"
How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2008. "normal: Normal Regression for Continuous Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

[1] "poisson.R"
How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2007. "poisson: Poisson Regression for Event Count Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

[1] "probit.R"
How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2007. "probit: Probit Regression for Dichotomous Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

[1] "repl.R"
How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2008. "logit: Logistic Regression for Dichotomous Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2008. "logit: Logistic Regression for Dichotomous Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

How to cite this model in Zelig:
Kosuke Imai, Gary King, and Olivia Lau. 2008. "logit: Logistic Regression for Dichotomous Dependent Variables" in Kosuke Imai, Gary King, and Olivia Lau, "Zelig: Everyone's Statistical Software,"http://gking.harvard.edu/zelig

> 
> ## just print the list of demos which failed
> if (length(demoFail) > 0){
+         cat ("The following demos failed:\n")
+         print (demoFail)
+ } else {
+         cat ("SUCCESS, all demos run sucessfully \n")
+ }
SUCCESS, all demos run sucessfully 
> 
